---
  - name: "Update Packages"
    apt:
      name: '*'
      state: latest

  - name: "Install Required Packages"
    apt:
      name: '{{ packages }}'
    vars:
      packages:
          - vim
          - wget
          - net-tools
          - rsync
      state: installed

  - name: "Download Sensu Go Agent Repository"
    get_url:
      url: https://packagecloud.io/install/repositories/sensu/stable/script.deb.sh
      dest: /root/

  - name: "Add Sensu Go Agent Repositroy"
    shell: bash /root/script.deb.sh

  - name: "Install Sensu Go Agent Package"
    apt:
      name: sensu-go-agent
      state: latest
